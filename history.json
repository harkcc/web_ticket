[
  {
    "task_id": "20241220100511",
    "type": "packing_list",
    "timestamp": "20241220_100518",
    "input_file": "20241220100511_invoice_info.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "failed",
    "error": "生成发票时发生错误: local variable 'total_price' referenced before assignment\nTraceback (most recent call last):\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 60, in generate_invoice\n    template_handler(wb, box_data, code, address_info)\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 254, in _fill_dingdang_template\n    (5, total_price),\nUnboundLocalError: local variable 'total_price' referenced before assignment\n"
  },
  {
    "task_id": "20241220100808",
    "type": "packing_list",
    "timestamp": "20241220_100819",
    "input_file": "20241220100808_invoice_info.xlsx",
    "output_file": "20241220100808.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "completed",
    "result_file": "20241220100808.xlsx",
    "address_info_status": "failed"
  },
  {
    "task_id": "20241220101344",
    "type": "packing_list",
    "timestamp": "20241220_101355",
    "input_file": "20241220101344_invoice_info.xlsx",
    "output_file": "20241220101344.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "completed",
    "result_file": "20241220101344.xlsx",
    "address_info_status": "failed"
  },
  {
    "task_id": "20241220101433",
    "type": "packing_list",
    "timestamp": "20241220_101434",
    "input_file": "20241220101433_invoice_info.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "failed",
    "error": "生成发票时发生错误: An error occurred while opening tunnels.\nTraceback (most recent call last):\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 60, in generate_invoice\n    template_handler(wb, box_data, code, address_info)\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 137, in _fill_dingdang_template\n    with self.db_connector as db:\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/db_connector.py\", line 64, in __enter__\n    return self.connect()\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/db_connector.py\", line 30, in connect\n    self.tunnel.start()\n  File \"/Users/chenminghui/py/lingxing_request/venv/lib/python3.10/site-packages/sshtunnel.py\", line 1344, in start\n    self._raise(HandlerSSHTunnelForwarderError,\n  File \"/Users/chenminghui/py/lingxing_request/venv/lib/python3.10/site-packages/sshtunnel.py\", line 1174, in _raise\n    raise exception(reason)\nsshtunnel.HandlerSSHTunnelForwarderError: An error occurred while opening tunnels.\n"
  },
  {
    "task_id": "20241220101512",
    "type": "packing_list",
    "timestamp": "20241220_101519",
    "input_file": "20241220101512_invoice_info.xlsx",
    "output_file": "20241220101512.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "completed",
    "result_file": "20241220101512.xlsx"
  },
  {
    "task_id": "20241220102447",
    "type": "packing_list",
    "timestamp": "20241220_102454",
    "input_file": "20241220102447_invoice_info.xlsx",
    "output_file": "20241220102447.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "completed",
    "result_file": "20241220102447.xlsx"
  },
  {
    "task_id": "20241220104108",
    "type": "packing_list",
    "timestamp": "20241220_104110",
    "input_file": "20241220104108_invoice_info.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "failed",
    "error": "生成发票时发生错误: '>' not supported between instances of 'str' and 'int'\nTraceback (most recent call last):\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 60, in generate_invoice\n    template_handler(wb, box_data, code, address_info)\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 260, in _fill_dingdang_template\n    (5, total_price if total_price > 0 else \"\"),  # 仅在总价格大于0时填入\nTypeError: '>' not supported between instances of 'str' and 'int'\n"
  },
  {
    "task_id": "20241220104352",
    "type": "packing_list",
    "timestamp": "20241220_104355",
    "input_file": "20241220104352_invoice_info.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "failed",
    "error": "生成发票时发生错误: could not convert string to float: ''\nTraceback (most recent call last):\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 60, in generate_invoice\n    template_handler(wb, box_data, code, address_info)\n  File \"/Users/chenminghui/py/lingxing_request/web_ticket/generator.py\", line 252, in _fill_dingdang_template\n    total_price = float(product_info.get('price', 0)) * item.box_quantities.get(box_number, 0) if product_info else 0\nValueError: could not convert string to float: ''\n"
  },
  {
    "task_id": "20241220105328",
    "type": "packing_list",
    "timestamp": "20241220_105336",
    "input_file": "20241220105328_invoice_info.xlsx",
    "output_file": "20241220105328.xlsx",
    "code_input": "FBA18NXMB5RK",
    "template_name": "叮铛卡航限时达",
    "status": "completed",
    "result_file": "20241220105328.xlsx",
    "address_info_status": "failed"
  }
]